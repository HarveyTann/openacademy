<odoo>
    <!-- 
        Action must be declared before its corresponding menu in the XML file 
        Data files are executed sequentially(in order), actions's ID must be 
        present in the database before the menu can be created
    -->
    <!-- 
        Menus are complex to declare there is a <menuitem> shortcut to declare
        an (ir.ui.menu) and connect it to the action more easily
    -->
    <!-- <record model="ir.actions.act_window" id="action_list_ideas">
        <field name="name">Ideas</field>
        <field name="res_model">idea.idea</field>
        <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="menu_ideas" parent="menu_root" name="Ideas" sequence="10"
            action="action_list_ideas"/> -->

     <!-- 
        Form view
        Used to create and edit single records
        root element is <form>, composed of high level 
        structure elements(groups, notebooks) and interactive elements(buttons and fields)
    -->
    <record model="ir.ui.view" id="course-form_view">
        <field name="name">course.form</field>
        <field name="model">openacademy.course</field>
        <!-- arch field must be declared as type="xml" to be parsed correctly -->
        <field name="arch" type="xml">
            <form string="Course Form">
                <sheets>
                    <group>
                        <field name="name"/>
                        <field name="responsible_id"/>
                    </group>
                    <!-- Notebook -->
                    <notebook>
                        <page string="Description">
                            <field name="description"/>
                        </page>
                        <page string="Sessions">
                            <field name="session_ids">
                                <tree string="Registered sessions">
                                    <field name="name"/>
                                    <field name="instructor_id"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheets>
            </form>
        </field>

    <!-- Search courses -->
    <record model="ir.ui.view" id="course_search_view">
        <field name="name">course.search</field>
        <field name="model">openacademy.course</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="description"/>
            </search>
        </field>
    </records>

    <!-- Window Action(course) -->
    <!-- 
        The tag is an action definition for a "window action",
        that is an action opening a view or a sets of views
    -->
    <record model="ir.actions.act_window" id="course_list_action">
        <field name="name">Courses</field>
        <field name="res_model">openacademy.course</field>
        <field name="view_mode">tree, form<field>
        <field name="help" type="html">
            <p class="o_view_nocontent_sailing_face">Create the first course</p>
        </field>
    </record>

    <!-- 
        Override the automatically generated list view for courses 
        Tree View - list all fields in the table(each field as a column)
    -->
    <record model="ir.ui.view" id="course_tree_view">
        <field name="name">course.tree</field>
        <field name="model"> openacademy.course</field>
        <field name="arch" type="xml">
            <tree string="Course Tree">
                <field name="name"/>
                <field name="responsible_id"/>
            </tree>
        </field>
    </record>

    <!-- Top level menu: no parent -->
    <menuitem id="main_openacademy_menu" name="Open Academy"/>
    <!-- 
        A first level in the left side menu is needed
        before using action attribute
    -->
    <menuitem id="openacademy_menu" name="Open Academy" parent="main_openacademy_menu"/>
    <!-- 
        the following menuitem should appear *after* its parent openacademy_menu 
        and *after* its action_course-list_action
    -->
    <menuitem id="courses_menu" name="Courses" parent="openacademy_menu" action="course_list_action"/>
    <!-- 
        Full id location:
        action="openacademy.course_list_action"
        It is not required when it is in the same module
    -->

    <!-- Session form view -->
    <record model="ir.ui.view" id="session_form_view">
        <field name="name">session.form</field>
        <field name="model">openacademy.session</field>
        <field name="arch" type="xml">
            <form string="Session Form">
                <sheets>
                    <group string="General">
                        <field name="course_id"/>
                        <field name="name">
                        <field name="instructor_id">
                        <field name="active"/>
                    </group>
                    <group string="Schedule">
                        <field name="start_date"/>
                        <field name="duration"/>
                        <field name="seats"/>
                        <field name="taken_seats" widget="progressbar"/>
                    </group>
                    <label for="attendee_ids"/>
                    <field name="attendee_ids"/>
                </sheets>
            </form>
        </field>
    </record>

    <!-- Session tree view -->
    <record model="ir.ui.view" id="session_tree_view">
        <field name="name">session.tree</field>
        <field name="model">openacademy.session</field>
        <field name="arch" type="xml">
            <tree string="Session Tree">
                <field name="name"/>
                <field name="course_id"/>
                <field name="taken_seats" widgets="progressbar"/>
            </tree>
        </field>
    </record>

    <!-- Window Action(session) -->
    <record model="ir.actions.act_window" id="session_list_action">
        <field name="name">Sessions</field>
        <field name="res_model">openacademy.session</field>
        <field name="view_mode">tree, form</field>
    </record>

    <menuitem id="session_menu" name="Sessions" parent="openacademy_menu" action="session_list_action"/>

</odoo>